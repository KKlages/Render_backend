version: 1.0
runtime: python3
build:
  commands:
    pre-build:
      # Install Node.js repository
      - curl -sL https://rpm.nodesource.com/setup_18.x | bash -
      # Install Node.js and npm
      - yum install -y nodejs
      # Verify installations
      - node --version
      - npm --version
    build:
      # Install Python dependencies
      - python -m pip install --upgrade pip
      - pip install -r requirements.txt
      # Install bpmnlint globally
      - npm install -g bpmnlint
run:
  command: python -m gunicorn -b 0.0.0.0:8000 app:app
  network:
    port: 8000
  env:
    - name: PYTHONUNBUFFERED
      value: "1"
    - name: PATH
      value: "/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/lib/node_modules/.bin"
